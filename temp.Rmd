---
title: "Notes"
author: "Ghislain Vieilledent"
date: "3 novembre 2018"
output: html_document
---




#### Predicted fcc with glm

Probabilities (raster) + deforested areas 2010-2017 (871336 ha) => prediction of forest cover change (fcc) 2010-2017

```{r fcc_2010_2017_glm, results="hide"}
if (!file.exists("output/fcc_2010_2017_glm.tif")) {
  # Model predictions 2010-2017
  fcc_glm_2017 <- far$deforest(input_raster="output/prob_glm.tif",
                               hectares=count_d$area,
                               output_file="output/fcc_2010_2017_glm.tif",
                               blk_rows=128L)
}
```

#### Performance indices

fcc_pred + fcc_obs => confusion matrix => performance indices

```{r indices_2010_2017_glm}
indices_2010_2017_glm <- far$validation(pred="output/fcc_2010_2017_glm.tif",
                                         obs="output/fcc_2010_2017_obs.tif",
                                         blk_rows=128L)
as.data.frame(indices_2010_2017_glm)
```

### Differences in projections in 2050

Objective: compare predictions in 2050 for iCAR and glm

#### Predictions in 2050 of glm

```{r fcc_2010_2050_glm, results="hide"}
# Model predictions 2010-2017
fcc_glm_2050 <- far$deforest(input_raster="output/prob_glm.tif",
                              hectares=4000000,
                              output_file="output/fcc_2010_2050_glm.tif",
                              blk_rows=128L)
```

#### Compute and plot differences

We compute the differences between the two rasters

```{r rast_diff, results="hide"}
# Raster of differences
far$differences(inputA = "output/forest_cover_2050.tif",
                inputB = "output/fcc_2010_2050_glm.tif",
                output_file = "output/diff_iCAR_glm_2050.tif",
                blk_rows = 1L)

```

We plot the differences

```{r plot_diff}
far$plot$differences("output/diff_iCAR_glm_2050.tif",
                     borders = "data/mada/mada38s.shp",
                     output_file = "output/diff_iCAR_glm_2050.png")
knitr::include_graphics("output/diff_iCAR_glm_2050.png")
```
